!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.apprun=t():e.apprun=t()}(this,(function(){return(()=>{"use strict";var e={231:(e,t,n)=>{n.r(t);let o;const s="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g;s.app&&s._AppRunVersions?o=s.app:(o=new class{constructor(){this._events={}}on(e,t,n={}){this._events[e]=this._events[e]||[],this._events[e].push({fn:t,options:n})}off(e,t){const n=this._events[e]||[];this._events[e]=n.filter((e=>e.fn!==t))}find(e){return this._events[e]}run(e,...t){const n=this._events[e]||[];return console.assert(n&&n.length>0,"No subscriber for event: "+e),this._events[e]=n.filter((e=>!e.options.once)),n.forEach((n=>{const{fn:o,options:s}=n;return s.delay?this.delay(e,o,t,s):o.apply(this,t),!n.options.once})),n.length}once(e,t,n={}){this.on(e,t,Object.assign(Object.assign({},n),{once:!0}))}delay(e,t,n,o){o._t&&clearTimeout(o._t),o._t=setTimeout((()=>{clearTimeout(o._t),t.apply(this,n)}),o.delay)}},s.app=o,s._AppRunVersions="AppRun-2");const l=o;function c(e){return e.map((e=>i(e))).join("")}function r(e){for(var t in e)null==e[t]?delete e[t]:"object"==typeof e[t]&&r(e[t])}function i(e){if(!e)return"";if(r(e),Array.isArray(e))return c(e);if("string"==typeof e)return e.startsWith("_html:")?e.substring(6):e;if(e.tag){const t=e.props?function(e){return Object.keys(e).map((t=>{return` ${"className"===t?"class":t}="${n=e[t],"object"==typeof n?Object.keys(n).map((e=>`${e}:${n[e]}`)).join(";"):n.toString()}"`;var n})).join("")}(e.props):"",n=e.children?c(e.children):"";return`<${e.tag}${t}>${n}</${e.tag}>`}return"object"==typeof e?JSON.stringify(e):void 0}const p=i;let a;function u(e){a=window.open("",e),a.document.write(`<html>\n  <title>AppRun Analyzer | ${document.location.href}</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n  </style>\n  <body><pre>`)}function f(e){a.document.write(e+"\n")}function d(){a.document.write("</pre>\n  </body>\n  </html>"),a.document.close()}app.debug=!0;let m=!1,h=[];app.on("debug",(e=>{m&&e.vdom&&(h.push(e),console.log(`* ${h.length} state(s) recorded.`))}));function g(e){const t=window.open("","_apprun_debug","toolbar=0");t.document.write(`<html>\n  <title>AppRun Analyzer | ${document.location.href}</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n    li { margin-left: 80px; }\n  </style>\n  <body>\n  <div id="main">${e}</div>\n  <\/script>\n  </body>\n  </html>`),t.document.close()}l.debug=!0,window["_apprun-help"]=["",()=>{Object.keys(window).forEach((e=>{e.startsWith("_apprun-")&&("_apprun-help"===e?console.log("AppRun Commands:"):console.log(`* ${e.substring(8)}: ${window[e][0]}`))}))}];const v=()=>{const e={components:{}};l.run("get-components",e);const{components:t}=e;return t};let y=0;if(l.on("debug",(e=>{1&y&&e.event&&console.log(e),2&y&&e.vdom&&console.log(e)})),window["_apprun-components"]=["components [print]",e=>{(e=>{const t=v(),n=[];if(Object.keys(t).forEach((e=>{const o="string"==typeof e?document.getElementById(e):e,s=t[e].map((e=>({component:e,events:e._actions})));n.push({element:o,comps:s})})),e){const e=(e=>{const t=({events:e})=>l.h("ul",null,e&&e.map((e=>l.h("li",null,e.name)))),n=({components:e})=>l.h("ul",null,e.map((e=>l.h("li",null,l.h("div",null,e.constructor.name),l.h(t,{events:e._actions})))));return l.h("ul",null,Object.keys(e).map((t=>l.h("li",null,l.h("div",null,"#",t),l.h(n,{components:e[t]})))))})(t);g(p(e))}else n.forEach((({element:e,comps:t})=>console.log(e,t)))})("print"===e)}],window["_apprun-events"]=["events [print]",e=>{(e=>{const t=l._events,n={},o=v();Object.keys(o).forEach((e=>{o[e].forEach((e=>{e._actions.forEach((t=>{n[t.name]=n[t.name]||[],n[t.name].push(e)}))}))}));const s=[];if(Object.keys(n).forEach((e=>{s.push({event:e,components:n[e],global:!!t[e]})})),s.sort(((e,t)=>e.event>t.event?1:-1)).map((e=>e.event)),e){const e=(e=>{const t=({components:e})=>l.h("ul",null,e.map((e=>l.h("li",null,l.h("div",null,e.constructor.name))))),n=({events:e,global:n})=>l.h("ul",null,e&&e.filter((e=>e.global===n)).map((({event:e,components:n})=>l.h("li",null,l.h("div",null,e),l.h(t,{components:n})))));return l.h("div",null,l.h("div",null,"GLOBAL EVENTS"),l.h(n,{events:e,global:!0}),l.h("div",null,"LOCAL EVENTS"),l.h(n,{events:e,global:!1}))})(s);g(p(e))}else console.log("=== GLOBAL EVENTS ==="),s.filter((e=>e.global)).forEach((({event:e,components:t})=>console.log({event:e},t))),console.log("=== LOCAL EVENTS ==="),s.filter((e=>!e.global)).forEach((({event:e,components:t})=>console.log({event:e},t)))})("print"===e)}],window["_apprun-log"]=["log [event|view] on|off",(e,t)=>{"on"===e?y=3:"off"===e?y=0:"event"===e?"on"===t?y|=1:"off"===t&&(y&=-2):"view"===e&&("on"===t?y|=2:"off"===t&&(y&=-3)),console.log(`* log ${e} ${t||""}`)}],window["_apprun-create-event-tests"]=["create-event-tests",()=>(()=>{const e={components:{}};app.run("get-components",e);const{components:t}=e;u(""),Object.keys(t).forEach((e=>{t[e].forEach((e=>{f(`const component = ${e.constructor.name};`),f(`describe('${e.constructor.name}', ()=>{`),e._actions.forEach((e=>{f(`  it ('should handle event: ${e.name}', ()=>{`),f(`    component.run('${e.name}');`),f("    expect(component.state).toBeTruthy();"),f("  })")})),f("});")}))})),d()})()],window["_apprun-create-state-tests"]=["create-state-tests <start|stop>",e=>{var t;"start"===(t=e)?(h=[],m=!0,console.log("* State logging started.")):"stop"===t?(0!==h.length?(u(""),h.forEach(((e,t)=>{f(`  it ('view snapshot: #${t+1}', ()=>{`),f(`    const component = ${e.component.constructor.name};`),f(`    const state = ${JSON.stringify(e.state,void 0,2)};`),f("    const vdom = component['view'](state);"),f("    expect(JSON.stringify(vdom)).toMatchSnapshot();"),f("  })")})),d()):console.log("* No state recorded."),m=!1,h=[],console.log("* State logging stopped.")):console.log("create-state-tests <start|stop>")}],window._apprun=e=>{const[t,...n]=e[0].split(" ").filter((e=>!!e)),o=window["_apprun-"+t];o?o[1](...n):window["_apprun-help"][1]()},console.info('AppRun DevTools 0.4: type "_apprun `help`" to list all available commands.'),window.__REDUX_DEVTOOLS_EXTENSION__){let e=!1;const t=window.__REDUX_DEVTOOLS_EXTENSION__.connect();t&&(console.info("Connected to the Redux DevTools"),t.subscribe((t=>{"START"===t.type?e=!0:"STOP"===t.type?e=!1:t.type})),l.on("debug",(n=>{if(e&&n.event){const e=n.newState,o={type:n.event,payload:n.e};e instanceof Promise?e.then((e=>t.send(o,e))):t.send(o,e)}})))}}},t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(231)})()}));
//# sourceMappingURL=apprun-dev-tools.js.map