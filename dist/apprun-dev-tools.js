!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.apprun=n():e.apprun=n()}(this,(function(){return(()=>{"use strict";var e={231:(e,n,t)=>{t.r(n);let o;const s="object"==typeof self&&self.self===self&&self||"object"==typeof t.g&&t.g.global===t.g&&t.g;s.app&&s._AppRunVersions?o=s.app:(o=new class{constructor(){this._events={}}on(e,n,t={}){this._events[e]=this._events[e]||[],this._events[e].push({fn:n,options:t})}off(e,n){const t=this._events[e]||[];this._events[e]=t.filter((e=>e.fn!==n))}find(e){return this._events[e]}run(e,...n){const t=this._events[e]||[];return console.assert(t&&t.length>0,"No subscriber for event: "+e),this._events[e]=t.filter((e=>!e.options.once)),t.forEach((t=>{const{fn:o,options:s}=t;return s.delay?this.delay(e,o,n,s):o.apply(this,n),!t.options.once})),t.length}once(e,n,t={}){this.on(e,n,Object.assign(Object.assign({},t),{once:!0}))}delay(e,n,t,o){o._t&&clearTimeout(o._t),o._t=setTimeout((()=>{clearTimeout(o._t),n.apply(this,t)}),o.delay)}},s.app=o,s._AppRunVersions="AppRun-2");const l=o;function c(e){return e.map((e=>r(e))).join("")}function i(e){for(var n in e)null==e[n]?delete e[n]:"object"==typeof e[n]&&i(e[n])}function r(e){if(!e)return"";if(i(e),Array.isArray(e))return c(e);if("string"==typeof e)return e.startsWith("_html:")?e.substring(6):e;if(e.tag){const n=e.props?function(e){return Object.keys(e).map((n=>{return` ${"className"===n?"class":n}="${t=e[n],"object"==typeof t?Object.keys(t).map((e=>`${e}:${t[e]}`)).join(";"):t.toString()}"`;var t})).join("")}(e.props):"",t=e.children?c(e.children):"";return`<${e.tag}${n}>${t}</${e.tag}>`}return"object"==typeof e?JSON.stringify(e):void 0}const p=r;let a;function u(e){a=window.open("",e),a.document.write(`<html>\n  <title>AppRun Analyzer | ${document.location.href}</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n  </style>\n  <body><pre>`)}function d(e){a.document.write(e+"\n")}function f(){a.document.write("</pre>\n  </body>\n  </html>"),a.document.close()}app.debug=!0;let m=!1,h=[];app.on("debug",(e=>{m&&e.vdom&&(h.push(e),console.log(`* ${h.length} state(s) recorded.`))}));var g;function v(e){const n=window.open("","_apprun_debug","toolbar=0");n.document.write(`<html>\n  <title>AppRun Analyzer | ${document.location.href}</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n    li { margin-left: 80px; }\n  </style>\n  <body>\n  <div id="main">${e}</div>\n  <\/script>\n  </body>\n  </html>`),n.document.close()}l.debug=!0,window["_apprun-help"]=["",()=>{Object.keys(window).forEach((e=>{e.startsWith("_apprun-")&&("_apprun-help"===e?console.log("AppRun Commands:"):console.log(`* ${e.substring(8)}: ${window[e][0]}`))}))}];const y=()=>{const e={components:{}};l.run("get-components",e);const{components:n}=e;return n};let w=Number(null===(g=null===window||void 0===window?void 0:window.localStorage)||void 0===g?void 0:g.getItem("__apprun_debugging__"))||0;if(l.on("debug",(e=>{1&w&&e.event&&console.log(e),2&w&&e.vdom&&console.log(e)})),window["_apprun-components"]=["components [print]",e=>{(e=>{const n=y(),t=[];if(n instanceof Map)for(let[e,o]of n){const n="string"==typeof e?document.getElementById(e):e;t.push({element:n,comps:o})}else Object.keys(n).forEach((e=>{const o="string"==typeof e?document.getElementById(e):e;t.push({element:o,comps:n[e]})}));if(e){const e=(e=>{const n=({events:e})=>l.h("ul",null,e&&e.filter((e=>"."!==e.name)).map((e=>l.h("li",null,e.name)))),t=({components:e})=>l.h("ul",null,e.map((e=>l.h("li",null,l.h("div",null,e.constructor.name),l.h(n,{events:e._actions})))));return l.h("ul",null,e.map((({element:e,comps:n})=>l.h("li",null,l.h("div",null,(e=>l.h("div",null,e.tagName.toLowerCase(),e.id?"#"+e.id:""," ",e.className&&e.className.split(" ").map((e=>"."+e)).join()))(e)),l.h(t,{components:n})))))})(t);v(p(e))}else t.forEach((({element:e,comps:n})=>console.log(e,n)))})("print"===e)}],window["_apprun-events"]=["events [print]",e=>{(e=>{const n=l._events,t={},o=y(),s=e=>e._actions.forEach((n=>{t[n.name]=t[n.name]||[],t[n.name].push(e)}));if(o instanceof Map)for(let[e,n]of o)n.forEach(s);else Object.keys(o).forEach((e=>o[e].forEach(s)));const c=[];if(Object.keys(t).forEach((e=>{c.push({event:e,components:t[e],global:!!n[e]})})),c.sort(((e,n)=>e.event>n.event?1:-1)).map((e=>e.event)),e){const e=(e=>{const n=({components:e})=>l.h("ul",null,e.map((e=>l.h("li",null,l.h("div",null,e.constructor.name))))),t=({events:e,global:t})=>l.h("ul",null,e&&e.filter((e=>e.global===t&&"."!==e.event)).map((({event:e,components:t})=>l.h("li",null,l.h("div",null,e),l.h(n,{components:t})))));return l.h("div",null,l.h("div",null,"GLOBAL EVENTS"),l.h(t,{events:e,global:!0}),l.h("div",null,"LOCAL EVENTS"),l.h(t,{events:e,global:!1}))})(c);v(p(e))}else console.log("=== GLOBAL EVENTS ==="),c.filter((e=>e.global&&"."!==e.event)).forEach((({event:e,components:n})=>console.log({event:e},n))),console.log("=== LOCAL EVENTS ==="),c.filter((e=>!e.global&&"."!==e.event)).forEach((({event:e,components:n})=>console.log({event:e},n)))})("print"===e)}],window["_apprun-log"]=["log [event|view] on|off",(e,n)=>{var t;"on"===e?w=3:"off"===e?w=0:"event"===e?"on"===n?w|=1:"off"===n&&(w&=-2):"view"===e&&("on"===n?w|=2:"off"===n&&(w&=-3)),console.log(`* log ${e} ${n||""}`),null===(t=null===window||void 0===window?void 0:window.localStorage)||void 0===t||t.setItem("__apprun_debugging__",`${w}`)}],window["_apprun-create-event-tests"]=["create-event-tests",()=>(()=>{const e={components:{}};app.run("get-components",e);const{components:n}=e;u(""),Object.keys(n).forEach((e=>{n[e].forEach((e=>{d(`import ${e.constructor.name} from '../src/${e.constructor.name}'`),d(`describe('${e.constructor.name}', ()=>{`),e._actions.forEach((n=>{"."!==n.name&&(d(`  it ('should handle event: ${n.name}', (done)=>{`),d(`    const component = new ${e.constructor.name}().mount();`),d(`    component.run('${n.name}');`),d("    setTimeout(() => {"),d("      //expect(?).toHaveBeenCalled();"),d("      //expect(component.state).toBe(?);"),d("    done();"),d("  })"))})),d("});")}))})),f()})()],window["_apprun-create-state-tests"]=["create-state-tests <start|stop>",e=>{var n;"start"===(n=e)?(h=[],m=!0,console.log("* State logging started.")):"stop"===n?(0!==h.length?(u(""),h.forEach(((e,n)=>{d(`  it ('view snapshot: #${n+1}', ()=>{`),d(`    const component = new ${e.component.constructor.name}()`),d(`    const state = ${JSON.stringify(e.state,void 0,2)};`),d("    const vdom = component['view'](state);"),d("    expect(JSON.stringify(vdom)).toMatchSnapshot();"),d("  })")})),f()):console.log("* No state recorded."),m=!1,h=[],console.log("* State logging stopped.")):console.log("create-state-tests <start|stop>")}],window._apprun=e=>{const[n,...t]=e[0].split(" ").filter((e=>!!e)),o=window[`_apprun-${n}`];o?o[1](...t):window["_apprun-help"][1]()},console.info('AppRun DevTools 2.27: type "_apprun `help`" to list all available commands.'),window.__REDUX_DEVTOOLS_EXTENSION__){let e=!1;const n=window.__REDUX_DEVTOOLS_EXTENSION__.connect();if(n){const t=location.hash||"#";n.send(t,"");const o=[{component:null,state:""}];console.info("Connected to the Redux DevTools"),n.subscribe((n=>{if("START"===n.type)e=!0;else if("STOP"===n.type)e=!1;else if("DISPATCH"===n.type){const e=n.payload.index;if(0===e)l.run(t);else{const{component:n,state:t}=o[e];null==n||n.setState(t)}}}));const s=(e,t,s)=>{null!=s&&(o.push({component:e,state:s}),n.send(t,s))};l.on("debug",(n=>{if(e&&n.event){const e=n.newState,t={type:n.event,payload:n.p},o=n.component;e instanceof Promise?e.then((e=>s(o,t,e))):s(o,t,e)}}))}}}},n={};function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{}};return e[o](s,s.exports,t),s.exports}return t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(231)})()}));
//# sourceMappingURL=apprun-dev-tools.js.map