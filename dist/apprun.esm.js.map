{"version":3,"file":"apprun.esm.js","sources":["../esm/app.js","../esm/createComponent.js","../esm/vdom-my.js","../esm/decorator.js","../esm/directive.js","../esm/component.js","../esm/web-component.js","../esm/router.js","../esm/apprun.js","../esm/vdom.js"],"sourcesContent":["export class App {\n    constructor() {\n        this._events = {};\n    }\n    on(name, fn, options = {}) {\n        this._events[name] = this._events[name] || [];\n        this._events[name].push({ fn: fn, options: options });\n    }\n    off(name, fn) {\n        let subscribers = this._events[name];\n        if (subscribers) {\n            subscribers = subscribers.filter((sub) => sub.fn !== fn);\n            if (subscribers.length)\n                this._events[name] = subscribers;\n            else\n                delete this._events[name];\n        }\n    }\n    run(name, ...args) {\n        let subscribers = this._events[name];\n        console.assert(!!subscribers, 'No subscriber for event: ' + name);\n        if (subscribers) {\n            subscribers = subscribers.filter((sub) => {\n                const { fn, options } = sub;\n                if (options.delay) {\n                    this.delay(name, fn, args, options);\n                }\n                else {\n                    fn.apply(this, args);\n                }\n                return !sub.options.once;\n            });\n            if (subscribers.length)\n                this._events[name] = subscribers;\n            else\n                delete this._events[name];\n        }\n        return subscribers ? subscribers.length : 0;\n    }\n    once(name, fn, options = {}) {\n        this.on(name, fn, Object.assign({}, options, { once: true }));\n    }\n    delay(name, fn, args, options) {\n        if (options._t)\n            clearTimeout(options._t);\n        options._t = setTimeout(() => {\n            clearTimeout(options._t);\n            fn.apply(this, args);\n        }, options.delay);\n    }\n}\nconst AppRunVersions = 'AppRun-2';\nlet app;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n    (typeof global === 'object' && global.global === global && global);\nif (root['app'] && root['_AppRunVersions']) {\n    app = root['app'];\n}\nelse {\n    app = new App();\n    root['app'] = app;\n    root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\nfunction render(node, parent, idx) {\n    const { tag, props, children } = node;\n    let id = props && props['id'];\n    let key = `_${idx}_`;\n    if (!id) {\n        id = `_${idx}_`;\n    }\n    else {\n        key = `_${id}_`;\n    }\n    if (!parent.__componentCache)\n        parent.__componentCache = {};\n    let component = parent.__componentCache[key];\n    if (!component) {\n        component = parent.__componentCache[key] = new tag(Object.assign({}, props, { children })).mount(id);\n    }\n    component.mounted && component.mounted(props, children);\n    const state = component.state;\n    let vdom = '';\n    if (!(state instanceof Promise) && component.view) {\n        vdom = component.view(state, props);\n        component.rendered && setTimeout(() => component.rendered(state, props));\n    }\n    return app.createElement(\"section\", Object.assign({}, props, { id: id }), vdom);\n}\nlet _idx = 0;\nfunction createComponent(node, parent, idx = 0) {\n    if (idx === 0)\n        _idx = 0;\n    if (typeof node === 'string')\n        return node;\n    if (Array.isArray(node))\n        return node.map(child => createComponent(child, parent, _idx++));\n    let vdom = node;\n    if (node && typeof (node.tag) === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n        vdom = render(node, parent, _idx++);\n    if (vdom && vdom.children)\n        vdom.children = vdom.children.map(child => createComponent(child, parent, _idx++));\n    return vdom;\n}\nexport default createComponent;\n","import createComponent from './createComponent';\nconst ATTR_PROPS = '_props';\nfunction collect(children) {\n    const ch = [];\n    const push = (c) => {\n        if (c !== null && c !== undefined && c !== '' && c !== false) {\n            ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n        }\n    };\n    children && children.forEach(c => {\n        if (Array.isArray(c)) {\n            c.forEach(i => push(i));\n        }\n        else {\n            push(c);\n        }\n    });\n    return ch;\n}\nexport function createElement(tag, props, ...children) {\n    const ch = collect(children);\n    if (typeof tag === 'string')\n        return { tag, props, children: ch };\n    else if (Array.isArray(tag))\n        return tag; // JSX fragments - babel\n    else if (tag === undefined && children)\n        return ch; // JSX fragments - typescript\n    else if (Object.getPrototypeOf(tag).__isAppRunComponent) {\n        return { tag, props, children: ch }; // createComponent(tag, { ...props, children });\n    }\n    else\n        return tag(props, ch);\n}\n;\nconst keyCache = {};\nexport const updateElement = render;\nexport function render(element, nodes, parent = {}) {\n    // console.log('render', element, node);\n    // tslint:disable-next-line\n    if (nodes == null)\n        return;\n    nodes = createComponent(nodes, parent);\n    if (!element)\n        return;\n    if (Array.isArray(nodes)) {\n        updateChildren(element, nodes);\n    }\n    else {\n        updateChildren(element, [nodes]);\n    }\n}\nfunction same(el, node) {\n    // if (!el || !node) return false;\n    const key1 = el.nodeName;\n    const key2 = `${node.tag || ''}`;\n    return key1.toUpperCase() === key2.toUpperCase();\n}\nfunction update(element, node) {\n    console.assert(!!element);\n    //console.log('update', element, node);\n    if (!same(element, node)) {\n        element.parentNode.replaceChild(create(node), element);\n        return;\n    }\n    updateChildren(element, node.children);\n    updateProps(element, node.props);\n}\nfunction updateChildren(element, children) {\n    const len = Math.min(element.childNodes.length, children.length);\n    for (let i = 0; i < len; i++) {\n        const child = children[i];\n        const el = element.childNodes[i];\n        if (typeof child === 'string') {\n            if (el.textContent !== child) {\n                if (el.nodeType === 3) {\n                    el.textContent = child;\n                }\n                else {\n                    element.replaceChild(createText(child), el);\n                }\n            }\n        }\n        else {\n            const key = child.props && child.props['key'];\n            if (key) {\n                if (el.key === key) {\n                    update(element.childNodes[i], child);\n                }\n                else {\n                    const old = keyCache[key];\n                    if (old) {\n                        element.insertBefore(old, el);\n                        element.appendChild(el);\n                        update(element.childNodes[i], child);\n                    }\n                    else {\n                        element.insertBefore(create(child), el);\n                    }\n                }\n            }\n            else {\n                update(element.childNodes[i], child);\n            }\n        }\n    }\n    let n = element.childNodes.length;\n    while (n > len) {\n        element.removeChild(element.lastChild);\n        n--;\n    }\n    if (children.length > len) {\n        const d = document.createDocumentFragment();\n        for (let i = len; i < children.length; i++) {\n            d.appendChild(create(children[i]));\n        }\n        element.appendChild(d);\n    }\n}\nfunction createText(node) {\n    if (node.indexOf('_html:') === 0) { // ?\n        const div = document.createElement('div');\n        div.insertAdjacentHTML('afterbegin', node.substring(6));\n        return div;\n    }\n    else {\n        return document.createTextNode(node);\n    }\n}\nfunction create(node, isSvg = false) {\n    console.assert(node !== null && node !== undefined);\n    // console.log('create', node, typeof node);\n    if (typeof node === \"string\")\n        return createText(node);\n    if (!node.tag || (typeof node.tag === 'function'))\n        return createText(JSON.stringify(node));\n    isSvg = isSvg || node.tag === \"svg\";\n    const element = isSvg\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n        : document.createElement(node.tag);\n    updateProps(element, node.props);\n    if (node.children)\n        node.children.forEach(child => element.appendChild(create(child, isSvg)));\n    return element;\n}\nfunction mergeProps(oldProps, newProps) {\n    newProps['class'] = newProps['class'] || newProps['className'];\n    delete newProps['className'];\n    const props = {};\n    if (oldProps)\n        Object.keys(oldProps).forEach(p => props[p] = null);\n    if (newProps)\n        Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n    return props;\n}\nfunction updateProps(element, props) {\n    console.assert(!!element);\n    // console.log('updateProps', element, props);\n    const cached = element[ATTR_PROPS] || {};\n    props = mergeProps(cached, props || {});\n    element[ATTR_PROPS] = props;\n    for (const name in props) {\n        const value = props[name];\n        // if (cached[name] === value) continue;\n        // console.log('updateProps', name, value);\n        if (name === 'style') {\n            if (element.style.cssText)\n                element.style.cssText = '';\n            for (const s in value) {\n                if (element.style[s] !== value[s])\n                    element.style[s] = value[s];\n            }\n        }\n        else if (name.startsWith('data-')) {\n            const dname = name.substring(5);\n            const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n            if (element.dataset[cname] !== value) {\n                if (value || value === \"\")\n                    element.dataset[cname] = value;\n                else\n                    delete element.dataset[cname];\n            }\n        }\n        else if (name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n            element instanceof SVGElement) {\n            if (element.getAttribute(name) !== value) {\n                if (value)\n                    element.setAttribute(name, value);\n                else\n                    element.removeAttribute(name);\n            }\n        }\n        else if (element[name] !== value) {\n            element[name] = value;\n        }\n        if (name === 'key' && value)\n            keyCache[value] = element;\n    }\n}\nexport function Fragment(props, ...children) {\n    return collect(children);\n}\n","export const Reflect = {\n    meta: new WeakMap(),\n    defineMetadata(metadataKey, metadataValue, target) {\n        if (!this.meta.has(target))\n            this.meta.set(target, {});\n        this.meta.get(target)[metadataKey] = metadataValue;\n    },\n    getMetadataKeys(target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n    },\n    getMetadata(metadataKey, target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n    }\n};\nexport function update(events, options = {}) {\n    return (target, key, descriptor) => {\n        const name = events ? events.toString() : key;\n        Reflect.defineMetadata(`apprun-update:${name}`, { name, key, options }, target);\n        return descriptor;\n    };\n}\nexport function on(events, options = {}) {\n    return function (target, key) {\n        const name = events ? events.toString() : key;\n        Reflect.defineMetadata(`apprun-update:${name}`, { name, key, options }, target);\n    };\n}\n","const getStateValue = (component, name) => {\n    return name ? component['state'][name] : component['state'];\n};\nconst setStateValue = (component, name, value) => {\n    if (name) {\n        const state = Object.assign({}, component['state']);\n        state[name] = value;\n        component.setState(state);\n    }\n    else {\n        component.setState(value);\n    }\n};\nexport default (key, props, tag, component) => {\n    if (key.startsWith('$on')) {\n        const event = props[key];\n        key = key.substring(1);\n        if (typeof event === 'boolean') {\n            props[key] = e => component.run(key, e);\n        }\n        else if (typeof event === 'string') {\n            props[key] = e => component.run(event, e);\n        }\n        else if (typeof event === 'function') {\n            props[key] = e => component.setState(event(component.state, e));\n        }\n        else if (Array.isArray(event)) {\n            const [handler, ...p] = event;\n            props[key] = e => component.setState(handler(component.state, ...p, e));\n        }\n    }\n    else if (key === '$bind') {\n        const type = props['type'] || 'text';\n        const name = typeof props[key] === 'string' ? props[key] : props['name'];\n        if (tag === 'input') {\n            switch (type) {\n                case 'checkbox':\n                    props['checked'] = getStateValue(component, name);\n                    props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n                    break;\n                case 'radio':\n                    props['checked'] = getStateValue(component, name) === props['value'];\n                    props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n                    break;\n                case 'number':\n                case 'range':\n                    props['value'] = getStateValue(component, name);\n                    props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n                    break;\n                default:\n                    props['value'] = getStateValue(component, name);\n                    props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n            }\n        }\n        else if (tag === 'select') {\n            props['selectedIndex'] = getStateValue(component, name);\n            props['onchange'] = e => {\n                if (!e.target.multiple) { // multiple selection use $bind on option\n                    setStateValue(component, name || e.target.name, e.target.selectedIndex);\n                }\n            };\n        }\n        else if (tag === 'option') {\n            props['selected'] = getStateValue(component, name);\n            props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n        }\n    }\n    else {\n        app.run('$', { key, tag, props, component });\n    }\n};\n","import app, { App } from './app';\nimport { Reflect } from './decorator';\nimport directive from './directive';\nconst componentCache = {};\napp.on('get-components', o => o.components = componentCache);\nconst REFRESH = state => state;\nexport class Component {\n    constructor(state, view, update, options) {\n        this.state = state;\n        this.view = view;\n        this.update = update;\n        this.options = options;\n        this._app = new App();\n        this._actions = [];\n        this._history = [];\n        this._history_idx = -1;\n        this.start = (element = null, options = { render: true }) => {\n            return this.mount(element, Object.assign({}, options, { render: true }));\n        };\n    }\n    renderState(state) {\n        if (!this.view)\n            return;\n        const h = app.createElement;\n        app.createElement = (tag, props, ...children) => {\n            props && Object.keys(props).forEach(key => {\n                if (key.startsWith('$')) {\n                    directive(key, props, tag, this);\n                    delete props[key];\n                }\n            });\n            return h(tag, props, ...children);\n        };\n        const html = this.view(state);\n        app.createElement = h;\n        app.run('debug', {\n            component: this,\n            state,\n            vdom: html || '[vdom is null - no render]',\n        });\n        if (typeof document !== 'object')\n            return;\n        const el = (typeof this.element === 'string') ?\n            document.getElementById(this.element) : this.element;\n        if (el) {\n            const tracking_attr = '_c';\n            if (!this.unload) {\n                el.removeAttribute && el.removeAttribute(tracking_attr);\n            }\n            else if (el['_component'] !== this) {\n                this.tracking_id = new Date().valueOf().toString();\n                el.setAttribute(tracking_attr, this.tracking_id);\n                const observer = new MutationObserver(changes => {\n                    const { removedNodes, oldValue } = changes[0];\n                    if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\n                        this.unload();\n                        observer.disconnect();\n                    }\n                });\n                if (el.parentNode)\n                    observer.observe(el.parentNode, {\n                        childList: true, subtree: true,\n                        attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\n                    });\n            }\n            el['_component'] = this;\n        }\n        app.render(el, html, this);\n        if (this.rendered)\n            (this.rendered(this.state));\n    }\n    setState(state, options = { render: true, history: false }) {\n        if (state instanceof Promise) {\n            // Promise will not be saved or rendered\n            // state will be saved and rendered when promise is resolved\n            state.then(s => {\n                this.setState(s, options);\n            }).catch(err => {\n                console.error(err);\n                throw err;\n            });\n            this._state = state;\n        }\n        else {\n            this._state = state;\n            if (state == null)\n                return;\n            this.state = state;\n            if (options.render !== false)\n                this.renderState(state);\n            if (options.history !== false && this.enable_history) {\n                this._history = [...this._history, state];\n                this._history_idx = this._history.length - 1;\n            }\n            if (typeof options.callback === 'function')\n                options.callback(this.state);\n        }\n    }\n    mount(element = null, options) {\n        console.assert(!this.element, 'Component already mounted.');\n        this.options = options = Object.assign({}, this.options, options);\n        this.element = element;\n        this.global_event = options.global_event;\n        this.enable_history = !!options.history;\n        if (this.enable_history) {\n            const prev = () => {\n                this._history_idx--;\n                if (this._history_idx >= 0) {\n                    this.setState(this._history[this._history_idx], { render: true, history: false });\n                }\n                else {\n                    this._history_idx = 0;\n                }\n            };\n            const next = () => {\n                this._history_idx++;\n                if (this._history_idx < this._history.length) {\n                    this.setState(this._history[this._history_idx], { render: true, history: false });\n                }\n                else {\n                    this._history_idx = this._history.length - 1;\n                }\n            };\n            this.on(options.history.prev || 'history-prev', prev);\n            this.on(options.history.next || 'history-next', next);\n        }\n        this.add_actions();\n        if (this.state === undefined)\n            this.state = this['model'] != null ? this['model'] : {};\n        if (options.render) {\n            this.setState(this.state, { render: true, history: true });\n        }\n        else {\n            this.setState(this.state, { render: false, history: true });\n        }\n        componentCache[element] = componentCache[element] || [];\n        componentCache[element].push(this);\n        return this;\n    }\n    is_global_event(name) {\n        return name && (name.startsWith('#') || name.startsWith('/'));\n    }\n    add_action(name, action, options = {}) {\n        if (!action || typeof action !== 'function')\n            return;\n        this.on(name, (...p) => {\n            const newState = action(this.state, ...p);\n            app.run('debug', {\n                component: this,\n                'event': name,\n                e: p,\n                state: this.state,\n                newState,\n                options\n            });\n            this.setState(newState, options);\n        }, options);\n    }\n    add_actions() {\n        const actions = this.update || {};\n        Reflect.getMetadataKeys(this).forEach(key => {\n            if (key.startsWith('apprun-update:')) {\n                const meta = Reflect.getMetadata(key, this);\n                actions[meta.name] = [this[meta.key].bind(this), meta.options];\n            }\n        });\n        const all = {};\n        if (Array.isArray(actions)) {\n            actions.forEach(act => {\n                const [name, action, opts] = act;\n                const names = name.toString();\n                names.split(',').forEach(n => all[n.trim()] = [action, opts]);\n            });\n        }\n        else {\n            Object.keys(actions).forEach(name => {\n                const action = actions[name];\n                if (typeof action === 'function' || Array.isArray(action)) {\n                    name.split(',').forEach(n => all[n.trim()] = action);\n                }\n            });\n        }\n        if (!all['.'])\n            all['.'] = REFRESH;\n        Object.keys(all).forEach(name => {\n            const action = all[name];\n            if (typeof action === 'function') {\n                this.add_action(name, action);\n            }\n            else if (Array.isArray(action)) {\n                this.add_action(name, action[0], action[1]);\n            }\n        });\n    }\n    run(event, ...args) {\n        const name = event.toString();\n        return this.global_event || this.is_global_event(name) ?\n            app.run(name, ...args) :\n            this._app.run(name, ...args);\n    }\n    on(event, fn, options) {\n        const name = event.toString();\n        this._actions.push({ name, fn });\n        return this.global_event || this.is_global_event(name) ?\n            app.on(name, fn, options) :\n            this._app.on(name, fn, options);\n    }\n    unmount() {\n        this._actions.forEach(action => {\n            const { name, fn } = action;\n            this.global_event || this.is_global_event(name) ?\n                app.off(name, fn) :\n                this._app.off(name, fn);\n        });\n    }\n}\nComponent.__isAppRunComponent = true;\n","export const customElement = (componentClass, options = {}) => class extends HTMLElement {\n    constructor() {\n        super();\n        const opts = Object.assign({ render: true, shadow: false }, options);\n        this._shadowRoot = opts.shadow ?\n            this.attachShadow({ mode: 'open' }) : this;\n        const props = {};\n        Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n        if (this.children) {\n            props['children'] = Array.from(this.children);\n            props['children'].forEach(el => el.parentElement.removeChild(el));\n        }\n        this._component = new componentClass(props).mount(this._shadowRoot, opts);\n        this.on = this._component.on.bind(this._component);\n        this.run = this._component.run.bind(this._component);\n    }\n    get state() { return this._component.state; }\n};\nexport default (name, componentClass, options) => {\n    customElements && customElements.define(name, customElement(componentClass, options));\n};\n","import app from './app';\nexport const ROUTER_EVENT = '//';\nexport const ROUTER_404_EVENT = '///';\nexport const route = (url) => {\n    if (!url)\n        url = '#';\n    if (url.startsWith('#')) {\n        const [name, ...rest] = url.split('/');\n        app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n        app.run(ROUTER_EVENT, name, ...rest);\n    }\n    else if (url.startsWith('/')) {\n        const [_, name, ...rest] = url.split('/');\n        app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n        app.run(ROUTER_EVENT, '/' + name, ...rest);\n    }\n    else {\n        app.run(url) || app.run(ROUTER_404_EVENT, url);\n        app.run(ROUTER_EVENT, url);\n    }\n};\nexport default route;\n","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { on, update } from './decorator';\nimport webComponent from './web-component';\nimport { route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\napp.start = (element, model, view, update, options) => {\n    const opts = Object.assign({}, options, { render: true, global_event: true });\n    const component = new Component(model, view, update);\n    if (options && options.rendered)\n        component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\nconst NOOP = _ => { };\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\nif (typeof document === 'object') {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        if (app['route'] === route) {\n            window.onpopstate = () => route(location.hash);\n            route(location.hash);\n        }\n    });\n}\nexport { app, Component, on, update };\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport default app;\nif (typeof window === 'object') {\n    window['Component'] = Component;\n    window['React'] = app;\n}\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent) {\n    updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n"],"names":["App","[object Object]","this","_events","name","fn","options","push","subscribers","filter","sub","length","args","console","assert","delay","apply","once","on","Object","assign","_t","clearTimeout","setTimeout","app","root","self","global","_idx","createComponent","node","parent","idx","Array","isArray","map","child","vdom","getPrototypeOf","tag","__isAppRunComponent","props","children","id","key","__componentCache","component","mount","mounted","state","Promise","view","rendered","createElement","render","ATTR_PROPS","collect","ch","c","forEach","i","keyCache","updateElement","element","nodes","updateChildren","update","el","key1","nodeName","key2","toUpperCase","same","updateProps","parentNode","replaceChild","create","len","Math","min","childNodes","textContent","nodeType","createText","old","insertBefore","appendChild","n","removeChild","lastChild","d","document","createDocumentFragment","indexOf","div","insertAdjacentHTML","substring","createTextNode","isSvg","JSON","stringify","createElementNS","oldProps","newProps","keys","p","mergeProps","value","style","cssText","s","startsWith","cname","replace","match","dataset","SVGElement","getAttribute","setAttribute","removeAttribute","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","get","events","descriptor","toString","defineMetadata","getStateValue","setStateValue","setState","event","e","run","handler","type","checked","Number","multiple","selectedIndex","selected","componentCache","o","components","REFRESH","Component","_app","_actions","_history","_history_idx","start","h","directive","html","getElementById","tracking_attr","unload","tracking_id","Date","valueOf","observer","MutationObserver","changes","removedNodes","oldValue","from","disconnect","observe","childList","subtree","attributes","attributeOldValue","attributeFilter","history","then","catch","err","error","_state","renderState","enable_history","callback","global_event","prev","next","add_actions","undefined","action","newState","actions","getMetadataKeys","getMetadata","bind","all","act","opts","split","trim","add_action","is_global_event","off","customElement","componentClass","HTMLElement","super","shadow","_shadowRoot","attachShadow","mode","item","parentElement","_component","ROUTER_EVENT","ROUTER_404_EVENT","route","url","rest","_","Fragment","webComponent","customElements","define","model","NOOP","addEventListener","window","onpopstate","location","hash"],"mappings":"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"}